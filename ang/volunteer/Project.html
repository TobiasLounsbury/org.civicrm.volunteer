<div class="crm-container">
  <div crm-ui-debug="project"></div>
  <div crm-ui-debug="relationships"></div>
  <div crm-ui-debug="profiles"></div>
  <div crm-ui-debug="locBlock"></div>
  <div id="backboneIncludes"></div>

  <form class="crm-form-block" name="projectForm" crm-ui-id-scope>

    <div class="help"></div>

    <fieldset>
      <legend>{{ ts("Project Settings") }}</legend>
      <div crm-ui-field="{name: 'projectForm.title', title: ts('Project Title')}">
        <input crm-ui-id="projectForm.title" ng-model="project.title" ng-required="true" />
      </div>

      <div crm-ui-field="{name: 'projectForm.description', title: ts('Project Description')}">
        <textarea crm-ui-id="projectForm.description" ng-model="project.description"></textarea>
      </div>

      <div crm-ui-field='{name: "projectForm.campaign", title: ts("Campaign")}'>
        <input crm-ui-id="projectForm.campaign" crm-entityref="{entity: 'Campaign', select: {allowClear:true}}" ng-model="project.campaign" />
      </div>

      <div crm-ui-field='{name: "projectForm.locBlock", title: ts("Location Block")}'>
        <select ng-change="locBlockChanged()" crm-ui-select="{placeholder: '', allowClear:true, width: '90%'}" ng-options="key as value for (key , value) in locationBlocks" ng-model="project.loc_block_id">
          <option />
        </select>
        <div id="crm-vol-location-block" class="crm-vol-extra-top" crm-ui-accordion="{title: ts('Edit Location'), collapsed: project.loc_block_id !==0}" ng-hide="!project.loc_block_id">
          <div class="status" ng-show="locBlock.count_loc_used > 0">{{ts("This location is used by other events/projects. Modifying location information will change values for all events/projects")}}</div>
          <fieldset>
            <legend>{{ts("Address")}}</legend>
            <div crm-ui-field='{name: "projectForm.locBlock.street_address", title: ts("Street Address")}'>
              <input size="30" crm-ui-id="projectForm.locBlock.street_address" ng-model="locBlock.address_1.street_address" />
            </div>
            <div crm-ui-field='{name: "projectForm.locBlock.supplemental_address_1", title: ts("Supplemental Address 1")}'>
              <input size="30" crm-ui-id="projectForm.locBlock.supplemental_address_1" ng-model="locBlock.address_1.supplemental_address_1" />
            </div>
            <div crm-ui-field='{name: "projectForm.locBlock.supplemental_address_2", title: ts("Supplemental Address 2")}'>
              <input size="30" crm-ui-id="projectForm.locBlock.supplemental_address_2" ng-model="locBlock.address_1.supplemental_address_2" />
            </div>
            <div crm-ui-field='{name: "projectForm.locBlock.city", title: ts("City")}'>
              <input crm-ui-id="projectForm.locBlock.city" ng-model="locBlock.address_1.city" />
            </div>
            <div crm-ui-field='{name: "projectForm.locBlock.postal", title: ts("Postal Code - Suffix")}'>
              <input size="9" crm-ui-id="projectForm.locBlock.postal" ng-model="locBlock.address_1.postal_code" />
               -
              <input size="5" crm-ui-id="projectForm.locBlock.postal_code_suffix" ng-model="locBlock.address_1.postal_code_suffix" />
            </div>
          </fieldset>
          <fieldset>
            <legend>{{ts("Phone")}}</legend>
            <div crm-ui-field='{name: "projectForm.locBlock.phone1", title: ts("Phone 1")}'>
              <input crm-ui-id="projectForm.locBlock.phone1" ng-model="locBlock.phone_1.phone" />
              {{ts("ext.")}} <input size="5" ng-model="locBlock.phone_1.phone_ext" />
              <select crm-ui-select="{width: '100'}" ng-options="type.label as type.label for type in phone_types track by item.value" ng-model="locBlock.phone_1.phone_type_id"></select>
            </div>
            <div crm-ui-field='{name: "projectForm.locBlock.phone2", title: ts("Phone 2")}'>
              <input crm-ui-id="projectForm.locBlock.phone2" ng-model="locBlock.phone_2.phone" />
              {{ts("ext.")}} <input size="5" ng-model="locBlock.phone_2.phone_ext" />
              <select crm-ui-select="{width: '100'}" ng-options="type.label as type.label for type in phone_types track by item.value" ng-model="locBlock.phone_2.phone_type_id"></select>
            </div>
          </fieldset>
          <fieldset>
            <legend>{{ts("Email")}}</legend>
            <div crm-ui-field='{name: "projectForm.locBlock.email1", title: ts("Email 1")}'>
              <input size="30" type="email" crm-ui-id="projectForm.locBlock.email1" ng-model="locBlock.email_1.email" />
            </div>
            <div crm-ui-field='{name: "projectForm.locBlock.email2", title: ts("Email 2")}'>
              <input size="30" type="email" crm-ui-id="projectForm.locBlock.email2" ng-model="locBlock.email_2.email" />
            </div>
          </fieldset>
        </div>
      </div>


      <div crm-ui-field="{name: 'projectForm.is_active', title: ts('Is this Project Active')}">
        <input type="checkbox" crm-ui-id="projectForm.is_active" ng-model="project.is_active" />
      </div>
    </fieldset>

    <fieldset>
      <legend>{{ ts("Relationships") }}</legend>

      <div ng-repeat="rType in relationship_types" crm-ui-field='{name: "projectForm[rType.name]", title: ts(rType.label)}'>
        <input crm-ui-id="projectForm[rType.name]" crm-entityref="{entity: 'Contact', select: {allowClear:true, multiple: true}}" ng-model="relationships[rType.value]" />
      </div>

    </fieldset>

    <fieldset>
      <legend>{{ ts("Included Profiles") }}</legend>
      <div id="org_civicrm_volunteer-sign-up-profiles">
        <div ng-repeat="profile in profiles" class='crm-profile-selector-container'>
          <a ng-click="removeProfile($index)" class="crm-hover-button crm-button-remove-profile">
            <span class="icon ui-icon-circle-close"></span>
          </a>

          <input crm-profile-selector="{}" ng-model="profile.uf_group_id" />
        </div>
      </div>
      <a ng-click="addProfile()" class="crm-hover-button crm-button-add-profile" style="display: inline-block;">
        <span class="icon ui-icon-plus"></span>add another profile
      </a>
    </fieldset>
    <div class="crm-submit-buttons">
        <span class="crm-button crm-icon-button">
          <span class="crm-button-icon ui-icon-check"> </span> <input type="submit" ng-click="saveProject()" value="{{ts('Save Changes')}}" class="crm-form-submit" accesskey="S" />
        </span>
    </div>
  </form>

</div>
